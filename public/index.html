<!DOCTYPE html>
<html>
<head>
  <title>Caesar-Ciphers - Quick Test Suite</title>
  <meta charset="utf-8" />
  <script src="dist/caesar-ciphers.js"></script>
</head>
<body>
  <h1>Caesar-Ciphers</h1>
  <h2>Quick Test Suite</h2>
  <table>
    <tr>
      <td><label for="implementation">Implementation:</label></td>
      <td><select id="implementation"></select></td>
    </tr>
    <tr>
      <td><label for="shift">Shift:</label></td>
      <td><input id="shift" type="number" min="0" max="26" value="1"></td>
    </tr>
    <tr>
      <td><label for="input">Input</label></td>
      <td><textarea id="input">John.Doe@example.com</textarea></td>
    </tr>
    <tr>
      <td><label for="output">Output:</label></td>
      <td><div id="output" /></td>
    </tr>
  </table>

  <h2>Sources</h2>
  <ul>
    <li><a href="dist/caesar-ciphers.js">caesar-ciphers.js</a></li>
  </ul>
  <h2>Tests</h2>
  <ul>
    <li><a href="mocha.html">mocha tests</a></li>
  </ul>

  <script>
    var implementation = document.getElementById('implementation');
    var input = document.getElementById('input');
    var shift = document.getElementById('shift');
    var output = document.getElementById('output');
    var cipher;

    Object.keys(caesarCiphers.ciphers).forEach(function(name){
      implementation.options.add(new Option(name, name));
    });

    function updateOutput(){
      output.innerHTML = cipher.encrypt(input.value);
    }

    function updateCipher(){
      var shift_value = Math.round(shift.value);
      shift_value = shift.value;
      try{
        cipher = new caesarCiphers.ciphers[implementation.value](shift_value);
      }catch(msg){
        console.error(msg);
      }
    }

    function update(){
      updateCipher();
      updateOutput();
    }

    implementation.addEventListener('change', update);
    input.addEventListener('keyup', updateOutput);
    input.addEventListener('change', updateOutput);

    shift.addEventListener('keyup', update);
    shift.addEventListener('change', update);

    update();
  </script>
</body>
</html>
